(this["webpackJsonpmarvel-app"]=this["webpackJsonpmarvel-app"]||[]).push([[0],{62:function(e,t,a){e.exports=a(94)},71:function(e,t,a){},89:function(e,t,a){},90:function(e,t,a){},92:function(e,t,a){},94:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(22),l=a.n(c),o=a(10),i=(a(71),a(24)),u=a(18),s=a(15),E=a(16),m=a(5),p=a(54),f=a.n(p),g={offset:0,limit:20,apikey:"4b762fd5a3572cdc233601d010c607c5"};function d(e){return"https://gateway.marvel.com:443/v1/public/".concat(e)}var C={get:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=1===t.page?t.page-1:(t.page-1)*g.limit;return new Promise((function(t,n){f.a.get(d(e),{params:Object(m.a)({},g,{offset:a})}).then((function(e){t(e.data)})).catch((function(e){n(e)}))}))}},S=function(){function e(){Object(s.a)(this,e)}return Object(E.a)(e,null,[{key:"getData",value:function(e){return C.get(this.CHARACTERS_ENDPOINT,e)}}]),e}();S.CHARACTERS_ENDPOINT="characters";function h(){return{type:"CHARACTERS_FETCH_REQUEST"}}var _=a(33),b=a(56),O=a(31),T=a(28),y=a(14);var A=function(e){for(var t=e.page,a=e.total,n=e.limit,c=e.pagesToShow,l=e.onChangePage,o=Math.floor(a/n),i=function(e){l(e)},u=[],s=t+c-1<=o?t+c-1:o,E=function(e){u.push(r.a.createElement(y.a.Item,{key:e,active:e===t,onClick:function(){return i(e)}},e))},m=t;m<=s;m++)E(m);return r.a.createElement(y.a,null,r.a.createElement(y.a.First,{disabled:1===t,onClick:function(){return i(1)}}),r.a.createElement(y.a.Prev,{disabled:1===t,onClick:function(){return i(t-1)}}),r.a.createElement(y.a.Ellipsis,{disabled:1===t,onClick:function(){return i(t-c>1?t-c:1)}}),u,r.a.createElement(y.a.Ellipsis,{disabled:t===s,onClick:function(){return i(t+c<o?t+c:o)}}),r.a.createElement(y.a.Next,{disabled:t===s,onClick:function(){return i(t+1)}}),r.a.createElement(y.a.Last,{disabled:t===s,onClick:function(){return i(o)}}))};a(89);var v=function(e){var t=e.results,a=e.limit,c=e.total,l=e.fetchData,o=e.page,i=e.setPage,u=(e.loading,e.title);Object(n.useEffect)((function(){l(o)}),[l,o]);var s=t&&t.map((function(e,t){return r.a.createElement(O.a,{className:"CardContainer",sm:3,key:t},r.a.createElement(T.a,{className:"Card"},r.a.createElement(T.a.Img,{className:"CardImg",variant:"top",src:e.imgSrc}),r.a.createElement(T.a.Body,null,r.a.createElement(T.a.Title,{title:e.title,className:"text-truncate"},e.title))))})),E=t&&t.length?r.a.createElement(A,{page:o,total:c,limit:a,pagesToShow:5,onChangePage:i}):null;return r.a.createElement(_.a,{fluid:"md",className:"MvlPage"},r.a.createElement("h2",null,u),r.a.createElement(b.a,{className:"p-2"},s),r.a.createElement("div",{className:"d-flex justify-content-center pt-3"},E))};var R=Object(o.b)((function(e){return{results:(e=e.characters).results,total:e.total,limit:e.limit,page:e.page,loading:e.loading}}),(function(e){return{fetchCharacters:function(t){return e(function(e){return function(t){t(h),S.getData({page:e}).then((function(e){t({type:"CHARACTERS_FETCH_SUCCESS",payload:e.data})})).catch((function(e){t(function(e){return{type:"CHARACTERS_FETCH_FAILURE",payload:e}}(e.message))})).finally((function(){t({type:"CHARACTERS_FETCH_DONE"})}))}}(t))},setPage:function(t){return e({type:"CHARACTERS_SET_PAGE",payload:t})}}}))((function(e){var t=e.results,a=e.limit,n=e.total,c=e.fetchCharacters,l=e.page,o=e.setPage,i=(e.loading,t.map((function(e){return{title:e.name,imgSrc:"".concat(e.thumbnail.path,".").concat(e.thumbnail.extension)}})));return r.a.createElement(v,{title:"Characters",results:i,limit:a,total:n,fetchData:c,setPage:o,page:l})})),I=function(){function e(){Object(s.a)(this,e)}return Object(E.a)(e,null,[{key:"getData",value:function(e){return C.get(this.CHARACTERS_ENDPOINT,e)}}]),e}();I.CHARACTERS_ENDPOINT="comics";function U(){return{type:"COMICS_FETCH_REQUEST"}}var H=Object(o.b)((function(e){return{results:(e=e.comics).results,total:e.total,limit:e.limit,page:e.page,loading:e.loading}}),(function(e){return{fetchComics:function(t){return e(function(e){return function(t){t(U),I.getData({page:e}).then((function(e){t({type:"COMICS_FETCH_SUCCESS",payload:e.data})})).catch((function(e){t(function(e){return{type:"COMICS_FETCH_FAILURE",payload:e}}(e.message))})).finally((function(){t({type:"COMICS_FETCH_DONE"})}))}}(t))},setPage:function(t){return e({type:"COMICS_SET_PAGE",payload:t})}}}))((function(e){var t=e.results,a=e.limit,n=e.total,c=e.fetchComics,l=e.page,o=e.setPage,i=(e.loading,t.map((function(e){return{title:e.title,imgSrc:"".concat(e.thumbnail.path,".").concat(e.thumbnail.extension)}})));return r.a.createElement(v,{title:"Comics",results:i,limit:a,total:n,fetchData:c,setPage:o,page:l})})),j=function(){function e(){Object(s.a)(this,e)}return Object(E.a)(e,null,[{key:"getData",value:function(e){return C.get(this.SERIES_ENDPOINT,e)}}]),e}();j.SERIES_ENDPOINT="series";function N(){return{type:"SERIES_FETCH_REQUEST",loading:!0}}var k=Object(o.b)((function(e){return{results:(e=e.series).results,limit:e.limit,total:e.total,page:e.page,loading:e.loading}}),(function(e){return{fetchSeries:function(t){return e(function(e){return function(t){t(N),j.getData({page:e}).then((function(e){t({type:"SERIES_FETCH_SUCCESS",payload:e.data})})).catch((function(e){t(function(e){return{type:"SERIES_FETCH_FAILURE",payload:e}}(e.message))})).finally((function(){t({type:"SERIES_FETCH_DONE"})}))}}(t))},setPage:function(t){return e({type:"SERIES_SET_PAGE",payload:t})}}}))((function(e){var t=e.results,a=e.limit,n=e.total,c=e.fetchSeries,l=e.page,o=e.setPage,i=(e.loading,t.map((function(e){return{title:e.title,imgSrc:"".concat(e.thumbnail.path,".").concat(e.thumbnail.extension)}})));return r.a.createElement(v,{title:"Series",results:i,limit:a,total:n,fetchData:c,setPage:o,page:l})})),L=function(){function e(){Object(s.a)(this,e)}return Object(E.a)(e,null,[{key:"login",value:function(e){return new Promise((function(t){t(e)}))}},{key:"logout",value:function(){return new Promise((function(e){e()}))}}]),e}();L.AUTH_ENDPOINT="auth";var F=a(34),P=a(20);a(90);var w=Object(o.b)((function(e){return{isAuthenticated:(e=e.auth).isAuthenticated}}),(function(e){return{authUser:function(t){return e(function(e){return function(t){t({type:"AUTH_LOGIN_REQUEST"}),L.login(e).then((function(e){localStorage.setItem("jwt_key",JSON.stringify(e)),t(function(e){return{type:"AUTH_LOGIN_SUCCESS",payload:e}}(e))})).catch((function(){t({type:"AUTH_LOGIN_FAILURE"})})).finally((function(){t({type:"AUTH_LOGIN_DONE"})}))}}(t))}}}))((function(e){var t=e.authUser;return r.a.createElement(_.a,{className:"Login",fluid:"sm"},r.a.createElement("div",{className:"LoginContent"},r.a.createElement("h1",{className:"LoginTitle"},"Marvel App"),r.a.createElement(P.a,{onSubmit:function(e){e.preventDefault();var a=e.target;t({username:a.username.value,password:a.password.value})},className:"LoginForm"},r.a.createElement(P.a.Group,{controlId:"username"},r.a.createElement(P.a.Label,null,"Username"),r.a.createElement(P.a.Control,{type:"email",required:!0})),r.a.createElement(P.a.Group,{controlId:"password"},r.a.createElement(P.a.Label,null,"Password"),r.a.createElement(P.a.Control,{type:"password",required:!0})),r.a.createElement(F.a,{variant:"primary",type:"submit"},"Login"))))})),D=(a(92),a(61)),G=function(e){var t=e.authed,a=e.component,n=Object(D.a)(e,["authed","component"]);return r.a.createElement(u.b,Object.assign({},n,{render:function(e){return t?r.a.createElement(a,e):r.a.createElement(u.a,{to:"/login"})}}))},M=a(27),Q=a(25);var x=Object(o.b)((function(e){var t=e.auth;return{isAuthenticated:t.isAuthenticated,user:t.user}}),(function(e){return{logoutUser:function(){return e((function(e){e({type:"AUTH_LOGOUT_SUCCESS"}),L.logout().then((function(t){localStorage.removeItem("jwt_key"),e(function(e){return{type:"AUTH_LOGOUT_SUCCESS",payload:e}}(t))})).catch((function(){e({type:"AUTH_LOGOUT_FAILURE"})})).catch((function(){e({type:"AUTH_LOGIN_FAILURE"})}))}))}}}))((function(e){var t=e.isAuthenticated,a=e.logoutUser,n=e.user,c=t?r.a.createElement("div",null,r.a.createElement(M.a,{bg:"light",expand:"lg"},r.a.createElement(M.a.Brand,{href:"#home"},"Marvel API"),r.a.createElement(M.a.Toggle,{"aria-controls":"basic-navbar-nav"}),r.a.createElement(M.a.Collapse,{id:"basic-navbar-nav"},r.a.createElement(Q.a,{className:"mr-auto"},r.a.createElement(Q.a.Link,null,r.a.createElement(i.b,{to:"/"},"Characters")),r.a.createElement(Q.a.Link,null,r.a.createElement(i.b,{to:"/comics"},"Comics")),r.a.createElement(Q.a.Link,null,r.a.createElement(i.b,{to:"/series"},"Series"))),r.a.createElement(Q.a,null,r.a.createElement("div",null,"Hello ",n.username,"!"),r.a.createElement(F.a,{onClick:function(){a()},variant:"primary"},"Logout")))),r.a.createElement("hr",null),r.a.createElement(u.d,null,r.a.createElement(G,{path:"/",component:R,authed:t}),r.a.createElement(G,{path:"/series",component:k,authed:t}),r.a.createElement(G,{path:"/comics",component:H,authed:t}),r.a.createElement(u.b,{path:"/login"},r.a.createElement(w,null)))):r.a.createElement(w,null);return r.a.createElement(i.a,null,r.a.createElement("div",{className:"App"},c))}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var B=a(21),J=a(58),W=a(59),q=a(60),$={loading:!1,results:[],limit:0,total:0,error:null,page:1},z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHARACTERS_FETCH_REQUEST":e=Object(m.a)({},e,{loading:!0});break;case"CHARACTERS_FETCH_SUCCESS":e=Object(m.a)({},e,{results:t.payload.results,limit:t.payload.limit,total:t.payload.total,error:null});break;case"CHARACTERS_FETCH_FAILURE":e=Object(m.a)({},e,{error:t.payload});break;case"CHARACTERS_FETCH_DONE":e=Object(m.a)({},e,{loading:!1});break;case"CHARACTERS_SET_PAGE":e=Object(m.a)({},e,{page:t.payload})}return e},K={loading:!1,results:[],limit:0,total:0,error:null,page:1},V=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"COMICS_FETCH_REQUEST":e=Object(m.a)({},e,{loading:!0});break;case"COMICS_FETCH_SUCCESS":e=Object(m.a)({},e,{results:t.payload.results,limit:t.payload.limit,total:t.payload.total,error:null});break;case"COMICS_FETCH_FAILURE":e=Object(m.a)({},e,{error:t.payload});break;case"COMICS_FETCH_DONE":e=Object(m.a)({},e,{loading:!1});break;case"COMICS_SET_PAGE":e=Object(m.a)({},e,{page:t.payload})}return e},X={loading:!1,results:[],limit:0,total:0,error:null,page:1},Y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:X,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SERIES_FETCH_REQUEST":e=Object(m.a)({},e,{loading:!0});break;case"SERIES_FETCH_SUCCESS":e=Object(m.a)({},e,{results:t.payload.results,limit:t.payload.results,total:t.payload.total,error:null});break;case"SERIES_FETCH_FAILURE":e=Object(m.a)({},e,{results:[],limit:0,total:0,error:t.payload});break;case"SERIES_FETCH_DONE":e=Object(m.a)({},e,{loading:!1});break;case"SERIES_SET_PAGE":e=Object(m.a)({},e,{page:t.payload})}return e},Z={isAuthenticated:!!localStorage.getItem("jwt_key"),user:JSON.parse(localStorage.getItem("jwt_key")),processing:!1},ee=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Z,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"AUTH_LOGIN_REQUEST":e=Object(m.a)({},e,{processing:!0});break;case"AUTH_LOGIN_SUCCESS":e=Object(m.a)({},e,{isAuthenticated:!0,user:t.payload});break;case"AUTH_LOGIN_FAILURE":e=Object(m.a)({},e,{error:t.payload});break;case"AUTH_LOGIN_DONE":e=Object(m.a)({},e,{processing:!1});break;case"AUTH_LOGOUT_REQUEST":e=Object(m.a)({},e,{processing:!0});break;case"AUTH_LOGOUT_SUCCESS":e=Object(m.a)({},e,{isAuthenticated:!1,user:{}});break;case"AUTH_LOGOUT_FAILURE":e=Object(m.a)({},e,{error:t.payload});break;case"AUTH_LOGOUT_DONE":e=Object(m.a)({},e,{processing:!1})}return e},te=Object(B.combineReducers)({characters:z,comics:V,series:Y,auth:ee}),ae=Object(q.composeWithDevTools)(Object(B.applyMiddleware)(J.a,Object(W.createLogger)())),ne=Object(B.createStore)(te,{},ae);l.a.render(r.a.createElement(o.a,{store:ne},r.a.createElement(x,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[62,1,2]]]);
//# sourceMappingURL=main.31fb119c.chunk.js.map